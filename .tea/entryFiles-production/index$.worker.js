/**! __BUGME_START__ */ !function(){"use strict";var e,t,n,o,r,i,a,s,c,p;!function(e){e.PageResume="pageResume",e.PagePause="pagePause",e.DebugPanelClick="tinyRemoteDebugPanelButtonClick",e.DebugConsole="onTinyDebugConsole",e.DebugNetworkRequest="tinyAppRemoteDebug_network_request",e.DebugNetworkResponse="tinyAppRemoteDebug_network_response",e.DebugNetworkError="tinyAppRemoteDebug_network_error",e.DebugStorageChanged="tinyAppRemoteDebug_storage",e.MessageFromVConsole="onMessageFromVConsole"}(e||(e={})),function(e){e.GetPagesData="Tiny.Data.getPageData",e.SetPageData="Tiny.Data.setPageData"}(t||(t={})),function(e){e.DataChanged="Tiny.Data.dataChanged"}(n||(n={})),function(e){e.GetStorageInfo="Tiny.Storage.getStorageInfo",e.ClearStorage="Tiny.Storage.clearStorage",e.RemoveStorage="Tiny.Storage.removeStorage",e.SetStorage="Tiny.Storage.setStorage"}(o||(o={})),function(e){e.StorageChanged="Tiny.Storage.storageChanged"}(r||(r={})),function(e){e.Enable="MiniAppLog.enable"}(i||(i={})),function(e){e.ApiSyncCall="MiniAppLog.onApiSyncCall",e.ApiSyncCallback="MiniAppLog.onApiSyncCallback",e.ApiCall="MiniAppLog.onApiCall",e.ApiCallback="MiniAppLog.onApiCallback",e.SetData="MiniAppLog.onSetData",e.SetDataCallback="MiniAppLog.onSetDataCallback",e.ShareAppMessage="MiniAppLog.onShareAppMessage"}(a||(a={})),function(e){e.consoleAPICalled="Runtime.consoleAPICalled",e.executionContextDestroyed="Runtime.executionContextDestroyed",e.executionContextsCleared="Runtime.executionContextsCleared",e.executionContextCreated="Runtime.executionContextCreated"}(s||(s={})),function(e){e.RequestWillBeSent="Network.requestWillBeSent",e.ResponseReceived="Network.responseReceived",e.LoadingFinished="Network.loadingFinished",e.LoadingFailed="Networkw.loadingFailed",e.GetResponseBody="Network.getResponseBody"}(c||(c={})),function(e){e.Data="data",e.Storage="storage",e.AppLog="applog"}(p||(p={}));var u=Date.now()%1e9;function l(e){this.name="__st"+(1e9*Math.random()>>>0)+u+++"__",e&&e.forEach&&e.forEach(this.add,this)}var g=l.prototype;g.add=function(e){var t=this.name;return e[t]||Object.defineProperty(e,t,{value:!0,writable:!0}),this},g.delete=function(e){return!!e[this.name]&&(e[this.name]=void 0,!0)},g.has=function(e){return!!e[this.name]};var f=l,d=self;var h="[DEBUG]";function _(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,[h].concat(e))}var y=function(){},m=d.importScripts,S=!1,O=[];function b(){return d.__appxStartupParams&&d.__appxStartupParams.appId?d.__appxStartupParams:d.AFAppX&&d.AFAppX.bridge&&d.AFAppX.bridge.callSync&&d.AFAppX.bridge.callSync("getStartupParams")||{}}var k=function(){var e="undefined"==typeof WeakSet?new f:new WeakSet;return function(t,n){if("object"==typeof n&&null!==n)try{if(e.has(n))return;e.add(n)}catch(e){console.error(e)}return n}};function A(e){return JSON.stringify(e,k())}var v=function(e,t){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function L(e,t){function n(){this.constructor=e}v(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var P=function(){return(P=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},C={0:{openchannel:"openchannel.alipay.com",hpmweb:"hpmweb.alipay.com"},1:{openchannel:"miniprogram.alipay.com",hpmweb:"hpmweb.alipay.com"},2:{openchannel:"openchannel-pre.alipay.com",hpmweb:"hpmweb-pre.alipay.com"}};var E,D=function(){function e(e){this.url="",this.opened=!1,e&&(this.url=e),this.onSocketError=this.onSocketError.bind(this),this.onSocketClose=this.onSocketClose.bind(this),this.onSocketMessage=this.onSocketMessage.bind(this),this.onSocketOpen=this.onSocketOpen.bind(this)}return Object.defineProperty(e.prototype,"isSocketOpened",{get:function(){return this.opened},enumerable:!1,configurable:!0}),e.prototype.setUrl=function(e){this.url=e},e}();"undefined"!=typeof WebSocket&&WebSocket.OPEN&&(E=WebSocket);var w,x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.messageBeforeSocketOpen=[],t}return L(t,e),t.prototype.open=function(){var e=this;if(!this.url)throw new Error("WebSocket url required");this.socket=new E(this.url),this.socket.onopen=this.onSocketOpen,this.socket.onmessage=function(t){"string"==typeof t.data?e.onSocketMessage(t.data):console.warn("[DEBUG] invalid message",t.data)},this.socket.onclose=this.onSocketClose,this.socket.onerror=this.onSocketError},t.prototype.close=function(){this.socket&&this.socket.close()},t.prototype.sendSocketMessage=function(e){var t="string"==typeof e?e:JSON.stringify(e);t.length>5e6||(this.opened?this.socket.send(t):this.messageBeforeSocketOpen.push(t))},t.prototype.onSocketMessage=function(e){},t.prototype.onSocketOpen=function(){var e=this;this.opened=!0,this.messageBeforeSocketOpen.length&&(this.messageBeforeSocketOpen.forEach((function(t){e.sendSocketMessage(t)})),this.messageBeforeSocketOpen=[])},t.prototype.onSocketClose=function(){this.opened=!1,console.log("[DEBUG] connection closed")},t.prototype.onSocketError=function(e){console.error("[DEBUG] connection onerror",e)},t}(D),R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.messageBeforeSocketOpen=[],t}return L(t,e),t.prototype.open=function(){var e=this;this.socketTask=AFAppX.bridge.connectSocket({url:this.url,multiple:!0,fail:function(t){e.onSocketError(t)}}),this.socketTask.onOpen((function(){e.handleSocketOpen()})),this.socketTask.onError((function(t){e.onSocketError(t.data)})),this.socketTask.onClose((function(){e.opened=!1,e.onSocketClose()})),this.socketTask.onMessage((function(t){e.opened||e.handleSocketOpen(),e.onSocketMessage(t.data.data)}))},t.prototype.sendSocketMessage=function(e){var t="string"==typeof e?e:JSON.stringify(e);t.length>5e6||(this.opened?this.socketTask.send({data:t,isBuffer:!1}):this.messageBeforeSocketOpen.push(t))},t.prototype.close=function(){this.opened&&this.socketTask.close()},t.prototype.onSocketMessage=function(e){},t.prototype.onSocketOpen=function(){},t.prototype.onSocketError=function(e){},t.prototype.onSocketClose=function(){},t.prototype.handleSocketOpen=function(){var e=this;this.opened||(this.opened=!0,this.messageBeforeSocketOpen.length&&(this.messageBeforeSocketOpen.forEach((function(t){e.sendSocketMessage(t)})),this.messageBeforeSocketOpen=[]),this.onSocketOpen())},t}(D),j=function(){this.channelConfigKey="0",this.silentMode=!1,this.userAgent="undefined"!=typeof navigator?navigator.swuserAgent||navigator.userAgent:"",this.isIOS=/iPhone|iPad|iOS/i.test(this.userAgent),this.isLyra=/LyraVM/i.test(this.userAgent),this.startupParams=b(),this.channelId=this.startupParams.channelId,"string"==typeof __BUGME_EXTERNAL_CHANNEL__&&__BUGME_EXTERNAL_CHANNEL__&&(this.channelId=__BUGME_EXTERNAL_CHANNEL__,this.silentMode=!0),this.isLyra&&(this.silentMode=!0),this.startupParams.remoteCh&&(this.channelConfigKey=String(this.startupParams.remoteCh))},N=function(){function e(){this.records=new Map}return e.prototype.setRequest=function(e,t){this.records.set(e,P(P({},this.records.get(e)||{}),t))},e.prototype.getRequest=function(e){return this.records.get(e)},e.prototype.removeRequest=function(e){this.records.has(e)&&this.records.delete(e)},e}(),B=function(){function e(e){void 0===e&&(e=[]),this._messageQueue=e,this._queueSize=0,this.isApplogEnabled=!1}return e.prototype.push=function(e){this._queueSize;var t=function(e){var t="string"==typeof e?e:JSON.stringify(e);return t.length>5e6?void console.warn("abort send websocket message due to size:",t.length):t}(e);null!=t&&(this._messageQueue.push(t),this._queueSize+=t.length)},e.prototype.sendQueuedMessages=function(){if(0!==this._messageQueue.length){var e=M().getWorkerSocket();e&&(this._messageQueue.forEach((function(t){return e.send(t)})),this._messageQueue=[],this._queueSize=0)}},e.prototype.setApplogEnabled=function(e){this.isApplogEnabled=e},e}(),T=function(){function e(){}return e.prototype.getAgentContext=function(){return this.agentContext||(this.agentContext=new j),this.agentContext},e.prototype.setWorkerSocket=function(e){this.workerSocket=e},e.prototype.getWorkerSocket=function(){return this.workerSocket},e.prototype.getNetworkRecorder=function(){return this.networkRecorder||(this.networkRecorder=new N),this.networkRecorder},e.prototype.getMessageQueue=function(){return null==this.messageQueue&&(this.messageQueue=new B),this.messageQueue},e}();function M(){return w||(w=new T),w}var I=function(e,t,n,o,r){var i,a,s=null,c=0;r||(r={});var p=function(){c=!1===r.leading?0:Date.now(),s=null,a=e.apply(null,i),i=null};return function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];var g=Date.now();c||!1!==r.leading||(c=g);var f=t-(g-c);return i=u,f<=0||f>t?(o(s),s=null,c=g,a=e.apply(null,i),i=null):s||!1===r.trailing||(s=n(p,f)),a}}((function(){var e=M().getWorkerSocket();e&&e.send({method:n.DataChanged,ext:{origin:p.Data}})}),300,setTimeout,clearTimeout);function X(e){if(d.__APPX_DEVTOOLS_GLOBAL_HOOK__&&d.__APPX_DEVTOOLS_GLOBAL_HOOK__[e]&&"function"==typeof d.__APPX_DEVTOOLS_GLOBAL_HOOK__[e])return d.__APPX_DEVTOOLS_GLOBAL_HOOK__[e]}var G=console.error;function q(){null==d.__APPX_DEVTOOLS_GLOBAL_HOOK__&&(d.__APPX_DEVTOOLS_GLOBAL_HOOK__={});var e={onSetData:X("onSetData"),onSetDataCallback:X("onSetDataCallback"),onApiSyncCall:X("onApiSyncCall"),onApiSyncCallback:X("onApiSyncCallback"),onApiCall:X("onApiCall"),onApiCallback:X("onApiCallback"),onError:X("onError")};d.__APPX_DEVTOOLS_GLOBAL_HOOK__.onSetData=function(t){try{if(e.onSetData)try{e.onSetData.call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,t)}catch(e){y(e)}I(),W({method:a.SetData,params:F(t),ext:{origin:p.AppLog}})}catch(e){}},d.__APPX_DEVTOOLS_GLOBAL_HOOK__.onSetDataCallback=function(t){try{if(e.onSetDataCallback)try{e.onSetDataCallback.call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,t)}catch(e){y(e)}W({method:a.SetDataCallback,params:t,ext:{origin:p.AppLog}})}catch(e){}},d.__APPX_DEVTOOLS_GLOBAL_HOOK__.onApiSyncCall=function(t){try{if(e.onApiSyncCall)try{e.onApiSyncCall.call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,t)}catch(e){y(e)}W({method:a.ApiSyncCall,params:H(t),ext:{origin:p.AppLog}})}catch(e){}},d.__APPX_DEVTOOLS_GLOBAL_HOOK__.onApiSyncCallback=function(t){try{if(e.onApiSyncCallback)try{e.onApiSyncCallback.call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,t)}catch(e){y(e)}W({method:a.ApiSyncCallback,params:H(t),ext:{origin:p.AppLog}})}catch(e){}},d.__APPX_DEVTOOLS_GLOBAL_HOOK__.onApiCall=function(t){try{if(e.onApiCall)try{e.onApiCall.call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,t)}catch(e){y(e)}W({method:a.ApiCall,params:H(t),ext:{origin:p.AppLog}})}catch(e){}},d.__APPX_DEVTOOLS_GLOBAL_HOOK__.onApiCallback=function(t){try{if(e.onApiCallback)try{e.onApiCallback.call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,t)}catch(e){y(e)}W({method:a.ApiCallback,params:H(t),ext:{origin:p.AppLog}})}catch(e){}},d.__APPX_DEVTOOLS_GLOBAL_HOOK__.onError=function(t){try{if(e.onError)try{e.onError.call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,t)}catch(e){}!function(e){var t=new Error(e.formatted.message);t.stack=e.formatted.stack,setTimeout(G.bind(console,t))}(t)}catch(e){}},function(e,t){for(var n=["onPageLoad","onPageShow","onPageHide","onPageReady","onPageUnload","onPageUpdate"],o=0,r=n;o<r.length;o++){t[c=r[o]]=X(c)}for(var i=function(n){e[n]=function(e){try{if(t[n])try{t[n].call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,e)}catch(e){y(e)}var o=e.context?e:P({route:e.page.route},e);W({method:"MiniAppLog."+n,params:o,ext:{origin:p.AppLog}})}catch(e){}}},a=0,s=n;a<s.length;a++){var c;i(c=s[a])}}(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,e),function(e,t){t.onPageLifecycle=X("onPageLifecycle"),e.onPageLifecycle=function(e){try{if(t.onPageLifecycle)try{t.onPageLifecycle.call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,e)}catch(e){y(e)}var n=function(e){var t;switch(e){case 0:t="onPageLoad";break;case 2:t="onPageReady";break;case 1:t="onPageShow";break;case 3:t="onPageHide";break;case 4:t="onPageUnload"}return t}(e.args[0]);if(!n)return;W({method:"MiniAppLog."+n,params:e,ext:{origin:p.AppLog}}),"onPageShow"===n&&I()}catch(e){}}}(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,e),function(e,t){for(var n=["onAppLaunch","onAppShow","onAppHide","onAppError","onAppUnhandledRejection"],o=0,r=n;o<r.length;o++){t[c=r[o]]=X(c)}for(var i=function(n){e[n]=function(e){try{if(t[n])try{t[n].call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,e)}catch(e){y(e)}W({method:"MiniAppLog."+n,params:e,ext:{origin:p.AppLog}})}catch(e){}}},a=0,s=n;a<s.length;a++){var c;i(c=s[a])}}(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,e),function(e,t){t.onAppLifecycle=X("onAppLifecycle"),e.onAppLifecycle=function(e){try{if(t.onAppLifecycle)try{t.onAppLifecycle.call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,e)}catch(e){y(e)}W({method:"MiniAppLog."+e.args[0],params:e,ext:{origin:p.AppLog}})}catch(e){}}}(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,e)}function W(e){try{var t=M().getWorkerSocket(),n=M().getMessageQueue();t&&n.isApplogEnabled?t.send(A(e)):n.push(A(e))}catch(e){}}function H(e){if(e.context){var t=e.context;return P(P({},e),{context:K(t,["apiName","extraInfo","isMiniExtension","option","startTime","taskId","__reqId"])})}return e}function F(e){return e.context?e:{pagePath:e.isPage?e.page.route:e.component.$page.route,isPage:e.isPage,option:e.options,componentIs:e.component?e.component.is:void 0}}function K(e,t){var n={};return t.forEach((function(t){n[t]=e[t]})),n}var V,U=function(){function e(e){this.objectStore=e}return e.prototype.mapFrom=function(e){var t=this;return Array.from(e).map((function(e){return t.mapFromOne(e)}))},e.prototype.mapFromOne=function(e){switch(typeof e){case"string":return this.mapString(e);case"number":return this.mapNumber(e);case"object":return Array.isArray(e)?this.mapArray(e):null===e?this.mapNull():this.mapObject(e);case"function":return this.mapFunction(e);case"undefined":return this.mapUndef();case"boolean":return this.mapBoolean(e);default:return{type:typeof e,value:e}}},e.prototype.mapString=function(e){return{type:"string",value:e}},e.prototype.mapNumber=function(e){return{type:"number",value:e,description:String(e)}},e.prototype.mapBoolean=function(e){return{type:"boolean",value:e}},e.prototype.mapFunction=function(e){var t=this.objectStore.save(e);return{type:"function",className:"Function",description:e.toString(),objectId:t}},e.prototype.mapUndef=function(){return{type:"undefined"}},e.prototype.mapNull=function(){return{type:"object",subtype:"null",value:null}},e.prototype.mapObject=function(e){var t,n,o=this,r=Object.getOwnPropertyDescriptors(e),i=Object.keys(r),a=this.objectStore.save(e),s=e.constructor?e.constructor.name:"Object",c={type:"object",className:s,description:s,objectId:a,preview:{type:"object",description:s,overflow:i.length>5,properties:i.slice(0,5).map((function(e){return o.mapObjectProperty(e,r[e])})).filter(Boolean)}};return e instanceof Error?(t="error",n=e.stack):e instanceof Date?(t="date",n=e.toString()):e instanceof RegExp?(t="regexp",n=e.toString()):e instanceof Promise&&(t="promise",n="Promise"),t&&(c.subtype=t,c.preview&&(c.preview.subtype=t)),n&&(c.description=n,c.preview&&(c.preview.description=n)),c},e.prototype.mapArray=function(e){var t="Array("+e.length+")";return{type:"object",subtype:"array",className:"Array",description:t,objectId:this.objectStore.save(e),preview:{type:"object",subtype:"array",description:t,overflow:!1,properties:this.mapArrayProperties(e)}}},e.prototype.mapArrayProperties=function(e){return e.map((function(e,t){if("function"==typeof e)return{name:String(t),type:"function",value:""};var n={name:String(t),type:typeof e,value:"object"==typeof e&&e?e.constructor&&e.constructor.name||"Object":String(e)};return null===e?n.subtype="null":Array.isArray(e)&&(n.subtype="array"),n}))},e.prototype.mapObjectProperty=function(e,t){if(t.get)return{name:e,type:"accessor"};if(!t.set){var n=t.value;switch(typeof n){case"object":return Array.isArray(n)?{name:e,type:"object",subtype:"array",value:"Array("+n.length+")"}:null===n?{name:e,type:"object",subtype:"null",value:"null"}:{name:e,type:"object",value:n.constructor?n.constructor.name:"Object"};case"function":return{type:"function",value:"",name:e};default:return{name:e,type:typeof n,value:String(n)}}}},e}(),z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return L(t,e),t.prototype.mapFrom=function(e){var t=this;return e.split("\n").slice(2).map((function(e,n){return t.testType1(e)?t.extractType1(e):t.testType2(e)?t.extractType2(e):void 0})).filter((function(e){return null!=e}))},t}(function(){function e(){this.e1=/\s*at\s(\S+)\s(\S+)\:(\d+)\:(\d+)\)/,this.e2=/\s*at\s(\S+)\:(\d+)\:(\d+)/}return e.prototype.testType1=function(e){return this.e1.test(e)},e.prototype.testType2=function(e){return this.e2.test(e)},e.prototype.extractType1=function(e){var t=e.match(this.e1);return null==t?null:{functionName:t[1],url:t[2].slice(1),lineNumber:Number(t[3]),columnNumber:Number(t[4])}},e.prototype.extractType2=function(e){var t=e.match(this.e2);return null==t?null:{functionName:"",url:t[1].slice(1),lineNumber:Number(t[2]),columnNumber:Number(t[3])}},e}()),Q=function(){function e(){this.id=0,this.id2Object=new Map,this.object2Id=new Map}return e.prototype.save=function(e){if(this.object2Id.has(e))return this.object2Id.get(e);var t=this.getNextObjectId();return this.id2Object.set(t,e),this.object2Id.set(e,t),t},e.prototype.query=function(e){return this.id2Object.get(e)},e.prototype.clear=function(e){var t=this.id2Object.get(e);t&&(this.id2Object.delete(e),this.object2Id.delete(t))},e.prototype.clearAll=function(){this.id2Object.clear(),this.object2Id.clear()},e.prototype.getNextObjectId=function(){return this.id++,'{"injectedScriptId":1,"id":'+this.id+"}"},e}(),J=function(){function e(e,t){this.objectStore=e,this.objectMapper=t}return e.prototype.handle=function(e){var t=this.objectStore.query(e.objectId);return t?{result:this.mapObject(t,Boolean(e.ownProperties),Boolean(e.accessorPropertiesOnly))}:{result:[]}},e.prototype.mapObject=function(e,t,n){var o=this;if(t){var r=Object.getOwnPropertyDescriptors(e),i=Object.keys(r).filter((function(e){return!(n&&!r[e].get&&!r[e].set)})).map((function(e){return o.mapResultOne(e,r[e],!0)}));return e.__proto__&&i.push(this.mapResultOne("__proto__",{configurable:!0,enumerable:!1,writable:!0,value:e.__proto__},!0)),i}for(var a=[],s={},c=e,p=!1,u=!0,l=function(){var e=Object.getOwnPropertyDescriptors(c);if(Object.keys(e).forEach((function(t){if(!s[t]){s[t]=!0;var r=e[t];(!n||r.get||r.set)&&a.push(o.mapResultOne(t,r,u))}})),!p){var t=Object.getOwnPropertyDescriptor(c,"__proto__");t&&(p=!0,a.push(g.mapResultOne("__proto__",t,u)))}c=c.__proto__,u=!1},g=this;c;)l();return a},e.prototype.mapResultOne=function(e,t,n){var o={writable:t.writable,configurable:Boolean(t.configurable),enumerable:Boolean(t.enumerable),isOwn:n,name:String(e)};return"value"in t&&(o.value=this.objectMapper.mapFromOne(t.value)),t.get&&(o.get=this.objectMapper.mapFromOne(t.get)),t.set&&(o.set=this.objectMapper.mapFromOne(t.set)),o},e}(),$=function(){function e(){this.objectStore=new Q,this.objectMapper=new U(this.objectStore),this.callFramesMapper=new z,this.getPropertiesHandler=new J(this.objectStore,this.objectMapper)}return e.prototype.parseObject=function(e){return this.objectMapper.mapFromOne(e)},e.prototype.getProperties=function(e){return this.getPropertiesHandler.handle(e)},e.prototype.getObjectById=function(e){return this.objectStore.query(e)},e.prototype.consoleAPICalled=function(e,t,n){var o=e;return"warn"===e&&(o="warning"),{method:"Runtime.consoleAPICalled",params:{type:o,args:this.objectMapper.mapFrom(n),executionContextId:1,timestamp:Date.now(),stackTrace:{callFrames:this.callFramesMapper.mapFrom(t)}}}},e}();function Y(){var e="string"==typeof __BUGME_EXTERNAL_CHANNEL__&&__BUGME_EXTERNAL_CHANNEL__||"boolean"==typeof __BUGME_CONSOLE_ENABLE__&&__BUGME_CONSOLE_ENABLE__;console.log("[tinybugme] override console",e),e&&(V=new te).overrideConsole()}function Z(){return V}var ee,te=function(){function e(){this.executionContextId=1,this.messageBeforeAgentInit=[],this.webSocketCheckingLoop=!1,this.parser=new $,this.createExecutionContext()}return e.prototype.createExecutionContext=function(){this.sendMesasge({method:s.executionContextsCleared,params:{}}),this.sendMesasge({method:s.executionContextCreated,params:{context:{id:this.executionContextId,origin:"app://",name:"app"}}})},e.prototype.overrideConsole=function(){var e=this,t=this;Object.defineProperties(console,["debug","log","info","warn","error"].reduce((function(n,o){var r=console[o].bind(console),i=e;return n[o]={value:function(){var e=arguments;try{var n=/^(\[framework\]|dispatchEvent|onMessage push|unsupported protocol)/;if(e.length&&"string"==typeof e[0]&&n.test(e[0]))return r.apply(null,e);var a=new Error;a.stack&&t.sendMesasge(i.parser.consoleAPICalled(o,a.stack,e))}catch(e){}return r.apply(null,e)}},n}),{}))},e.prototype.sendMesasge=function(e){var t=M().getWorkerSocket();t?(this.flushPendingMessasges(),t.sendAfterReceivingMessage(e)):(this.messageBeforeAgentInit.push(e),this.checkWebSocketReady())},e.prototype.flushPendingMessasges=function(){if(this.messageBeforeAgentInit.length){var e=M().getWorkerSocket();e&&(this.messageBeforeAgentInit.forEach((function(t){e.sendAfterReceivingMessage(t)})),this.messageBeforeAgentInit=[])}},e.prototype.checkWebSocketReady=function(){var e=this;if(!this.webSocketCheckingLoop){this.webSocketCheckingLoop=!0;var t=setInterval((function(){M().getWorkerSocket()&&(clearInterval(t),e.flushPendingMessasges())}),1e3)}},e}();function ne(e){if(M().getAgentContext().silentMode)return!1;var t="";switch(e){case ee.Connecting:t="准备中";break;case ee.Connected:t="已连接";break;case ee.Reconnecting:t="重试中";break;case ee.Disconnected:t="已断开"}e===ee.Reconnecting&&(e=ee.Connecting),AFAppX.bridge.call("showRemoteDebugPanel",{status:e,text:"真机调试"+t,buttonTitle:"退出"})}!function(e){e.Connecting="connecting",e.Connected="connected",e.Disconnected="disconnected",e.Reconnecting="reconnecting"}(ee||(ee={}));var oe=Object.freeze({__proto__:null,enable:function(e){M().getWorkerSocket().send({id:e.id,result:{}})},getResponseBody:function(e){var t=e.params.requestId,n=M(),o=n.getNetworkRecorder(),r=o.getRequest(t);r?n.getWorkerSocket().send({id:e.id,result:{base64Encoded:r.isBase64Body,body:r.responseBody}}):n.getWorkerSocket().send({id:e.id,result:{}}),o.removeRequest(t)}});var re="function"==typeof __eval?__eval:"function"==typeof eval?eval:function(){};var ie=Object.freeze({__proto__:null,enable:function(e){M().getWorkerSocket().send({id:e.id,result:{}});var t=Z();t&&t.createExecutionContext()},getProperties:function(e){var t=Z();t&&M().getWorkerSocket().send({id:e.id,result:t.parser.getProperties(e.params)})},compileScript:function(e){M().getWorkerSocket().send({id:e.id,result:{}})},evaluate:function(e){var t=Z();if(t){var n=t.parser;try{var o=re(e.params.expression);M().getWorkerSocket().send({id:e.id,result:{result:n.parseObject(o)}})}catch(t){t.stack=t.name+": "+t.message,M().getWorkerSocket().send({id:e.id,result:{exceptionDetails:{columnNumber:20,exception:n.parseObject(t),exceptionId:1,lineNumber:0,text:"Uncaught"},result:n.parseObject(t)}})}}}});var ae=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e,t){function n(e,t){var n=[],o=[];return null==t&&(t=function(e,t){return n[0]===t?"[Circular ~]":"[Circular ~."+o.slice(0,n.indexOf(t)).join(".")+"]"}),function(r,i){if(n.length>0){var a=n.indexOf(this);~a?n.splice(a+1):n.push(this),~a?o.splice(a,1/0,r):o.push(r),~n.indexOf(i)&&(i=t.call(this,r,i))}else n.push(i);return null==e?i:e.call(this,r,i)}}(e.exports=function(e,t,o,r){return JSON.stringify(e,n(t,r),o)}).getSerialize=n}));ae.getSerialize;var se=Object.freeze({__proto__:null,getPagesData:function(e){var t=d.getCurrentPages().filter(Boolean).map((function(e){return{viewId:e.$viewId,data:ae(e.data),route:e.route}}));M().getWorkerSocket().send({id:e.id,ext:e.ext,result:{data:t}})},setPageData:function(e){var t=e.params,n=void 0===t?{}:t,o=n.viewId,r=n.data,i=d.getCurrentPages().filter((function(e){return e&&""+e.$viewId===o}))[0];i&&r&&i.setData(r)}});var ce=Object.freeze({__proto__:null,getStorageInfo:function(e){var t=AFAppX.bridge.getStorageInfoSync(),n=t.keys.map((function(e){var t=AFAppX.bridge.getStorageSync({key:e}).data;return{key:e,value:t,type:typeof t}}));M().getWorkerSocket().send({id:e.id,ext:e.ext,result:{currentSize:t.currentSize,limitSize:t.limitSize,data:n}})},clearStorage:function(e){AFAppX.bridge.clearStorageSync()},removeStorage:function(e){var t=e.params,n=void 0===t?{}:t;n.key&&AFAppX.bridge.removeStorageSync({key:n.key})},setStorage:function(e){var t=e.params,n=void 0===t?{}:t;n.key&&AFAppX.bridge.setStorageSync({key:n.key,data:n.value})}});var pe=Object.freeze({__proto__:null,enable:function(){var e=M().getMessageQueue();e.setApplogEnabled(!0),e.sendQueuedMessages()}});var ue=Object.freeze({__proto__:null,Data:se,Storage:ce,Applog:pe,ping:function(e){M().getWorkerSocket().send({id:e.id,result:{}})},getSystemInfo:function(e){var t=AFAppX.bridge.getSystemInfoSync(),n={userAgent:M().getAgentContext().userAgent,sdkVersion:AFAppX.bridge.SDKVersion,alipayVersion:t.version,model:t.model,system:t.system};M().getWorkerSocket().send({id:e.id,result:n})},getStartupParams:function(e){var t=b();M().getWorkerSocket().send({id:e.id,result:t})}});var le=Object.freeze({__proto__:null,getResourceTree:function(e){M().getWorkerSocket().send({id:e.id,result:{}})}}),ge=Object.freeze({__proto__:null,Network:oe,Runtime:ie,Tiny:ue,Page:le}),fe=!1;if("undefined"!=typeof WebSocket&&WebSocket.OPEN){fe=!0;try{delete d.WebSocket}catch(_){}}var de=function(e){function t(t){var n=e.call(this,t)||this;return n.isMessageReceived=!1,n.isSocketOpenedOnce=!1,n.messageBeforeReceived=[],n.isDebugExited=!1,ne(ee.Connecting),n}return L(t,e),t.prototype.send=function(e){return this.sendSocketMessage(e)},t.prototype.sendAfterReceivingMessage=function(e){this.isMessageReceived?this.send(e):this.messageBeforeReceived.push("string"==typeof e?e:JSON.stringify(e))},t.prototype.exitDebug=function(){this.isDebugExited=!0,ne(ee.Disconnected),this.close(),!fe&&M().getAgentContext().isIOS&&[1,2].forEach((function(e){AFAppX.bridge.call("closeSocket",{socketTaskId:e})}))},t.prototype.onSocketOpen=function(){e.prototype.onSocketOpen.call(this),this.isSocketOpenedOnce=!0,clearInterval(this.reconnectInterval),this.send({method:i.Enable,params:{},ext:{origin:p.AppLog}}),this.send({method:n.DataChanged,ext:{origin:p.Data}})},t.prototype.onSocketClose=function(){e.prototype.onSocketClose.call(this),this.isDebugExited||this.reconnect()},t.prototype.onSocketError=function(e){this.isSocketOpenedOnce||M().getAgentContext().silentMode||(ne(ee.Disconnected),AFAppX.bridge.showToast({content:"本次真机调试已结束，请重新生成调试版本",duration:2e3,success:function(){}}))},t.prototype.onSocketMessage=function(e){var t,n=this;this.isMessageReceived||(this.isMessageReceived=!0,this.messageBeforeReceived.forEach((function(e){n.send(e)})),this.messageBeforeReceived=[]);try{t=JSON.parse(e)}catch(t){return void("CLIENT:JOIN"===e?ne(ee.Connected):"CLIENT:LEAVE"===e&&this.exitDebug())}var o=function(e){if(!e)return;for(var t=e.split("."),n=ge,o=0,r=t;o<r.length;o++){var i=r[o];if(!(n=n[i]))break}return n}(t.method);o?o(t):this.send({id:t.id,error:{code:-32e3,message:"unsupported"}})},t.prototype.reconnect=function(){var e=this;ne(ee.Reconnecting),clearInterval(this.reconnectInterval),this.reconnectInterval=setInterval((function(){e.isSocketOpened?clearInterval(e.reconnectInterval):e.open()}),2e3)},t}(fe?x:R);var he=/\/tyro\/agent$/,_e=function(){function t(){this.isIOS=M().getAgentContext().isIOS,this.isLyra=M().getAgentContext().isLyra}return t.prototype.setup=function(){this.isLyra||this.isIOS?this.listenDebugEvent4IOS():this.listenDebugEvent()},t.prototype.onNetworkRequest=function(e){if(!he.test(e.url)){var t=(e.method||"GET").toUpperCase(),n=ye(e.headers),o={method:c.RequestWillBeSent,params:{documentURL:"",loaderId:"",requestId:e.requestId,request:{method:t,url:e.url,headers:n,postData:"POST"===t?e.postBody:"",mixedContentType:"none",initialPriority:"HIGH",isLinkPreload:!1},timestamp:me(),type:"XHR"}},r=M();r.getWorkerSocket().send(o),r.getNetworkRecorder().setRequest(e.requestId,{method:t,requestHeaders:n,url:e.url})}},t.prototype.onNetworkResponse=function(e){if(!he.test(e.url)){var t=M(),n=t.getNetworkRecorder().getRequest(e.requestId)||{},o={method:c.ResponseReceived,params:{requestId:e.requestId,loaderId:"",type:"XHR",timestamp:me(),response:{url:n.url||"",status:e.status,method:n.method||"",headers:ye(e.headers),requestHeaders:n.requestHeaders,connectionReused:!1,encodedDataLength:0,securityState:"unknown",statusText:"",protocol:"",mimeType:e.headers["Content-Type"]||e.headers["content-type"]}}};t.getWorkerSocket().send(o);var r={method:c.LoadingFinished,params:{requestId:e.requestId,timestamp:me(),encodedDataLength:0}};t.getWorkerSocket().send(r),t.getNetworkRecorder().setRequest(e.requestId,{responseBody:e.body,isBase64Body:!1})}},t.prototype.onNetworkError=function(e){if(!he.test(e.url)){var t={method:c.LoadingFailed,params:{canceled:!1,errorText:e.errorMsg||"",requestId:e.requestId,timestamp:me(),type:"XHR"}};M().getWorkerSocket().send(t)}},t.prototype.onStorageChanged=function(e){var t={};Object.keys(e.data).forEach((function(n){try{t[n]=JSON.parse(e.data[n]).APDataStorage}catch(e){}})),M().getWorkerSocket().send({method:r.StorageChanged,params:{data:t},ext:{origin:p.Storage}})},t.prototype.listenDebugEvent4IOS=function(){var t=this,n=AFAppX.bridge;n.on(e.DebugNetworkRequest,(function(e){t.onNetworkRequest(e.data)})),n.on(e.DebugNetworkResponse,(function(e){t.onNetworkResponse(e.data)})),n.on(e.DebugNetworkError,(function(e){t.onNetworkError(e.data)})),n.on(e.DebugStorageChanged,(function(e){t.onStorageChanged(e.data)}))},t.prototype.listenDebugEvent=function(){var t=this;AFAppX.bridge.on(e.DebugConsole,(function(n){var o,r=n.data,i=r.type,a=r.content;try{o=JSON.parse(a)}catch(e){return}switch(i){case e.DebugNetworkRequest:t.onNetworkRequest(o);break;case e.DebugNetworkResponse:t.onNetworkResponse(o);break;case e.DebugNetworkError:t.onNetworkError(o);break;case e.DebugStorageChanged:t.onStorageChanged(o)}}))},t}();function ye(e){if(!e||"object"!=typeof e)return{};var t={};return Object.keys(e).forEach((function(n){t[n]=""+e[n]})),t}function me(){return Date.now()/1e3}var Se,Oe=function(){function t(){this.inited=!1}return t.prototype.setup=function(){if(this.inited)return!1;var t=AFAppX.bridge;if(/^1\./.test(t.SDKVersion)){var n=function(e,t,n,o){var r;return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];o(r),r=n((function(){e.apply(null,i)}),t)}}(this.onPageResumeOrPause.bind(this),300,setTimeout,clearTimeout);t.on(e.PageResume,n),t.on(e.PagePause,n)}t.on(e.DebugPanelClick,this.onDebugPanelClick),this.debugEventListener=new _e,this.debugEventListener.setup(),this.inited=!0},t.prototype.onPageResumeOrPause=function(){var e=M().getWorkerSocket();e&&e.send({method:n.DataChanged,params:{},ext:{origin:p.Data}})},t.prototype.onDebugPanelClick=function(){var e=M().getWorkerSocket();e&&e.exitDebug()},t}();var be,ke=function(){function e(){}return e.prototype.initGlobalListener=function(){(Se||(Se=new Oe),Se).setup()},e.prototype.init=function(){this.makeConnection(),this.printSDKVersion()},e.prototype.makeConnection=function(){var e=M(),t=function(){if("string"==typeof __BUGME_EXTERNAL_WORKER_URL__&&__BUGME_EXTERNAL_WORKER_URL__)return __BUGME_EXTERNAL_WORKER_URL__;var e=M().getAgentContext(),t=e.channelId,n=e.channelConfigKey;return"wss://"+(C[n]||C[0]).hpmweb+"/bugme/client_w/"+t}(),n=new de(t);e.setWorkerSocket(n),e.getAgentContext().isIOS?n.open():setTimeout((function(){n.open()}),1200)},e.prototype.printSDKVersion=function(){var e=AFAppX.bridge.SDKVersion;/^2\./.test(e)&&setTimeout(console.log.bind(console,"SDKVersion: "+e))},e}();function Ae(){return be||(be=new ke),be}if(!d.__BUGME_ON__){d.__BUGME_ON__=!0;try{!function(){try{q(),Y(),(t=Object.getOwnPropertyDescriptor(d,"requirePlugin"))&&!t.configurable||(t&&(e=d.requirePlugin),Object.defineProperty(d,"requirePlugin",{get:function(){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=Date.now();W({method:a.ApiSyncCall,params:{aTime:o,context:{apiName:"requirePlugin",option:{arguments:t}}},ext:{origin:p.AppLog}});try{var r=e.apply(void 0,t);return W({method:a.ApiSyncCallback,params:{args:r?void 0:[{error:1,errorMessage:"未找到对应插件"}],bTime:Date.now()===o?o+.01:Date.now(),context:{apiName:"requirePlugin"}},ext:{origin:p.AppLog}}),r}catch(e){throw W({method:a.ApiSyncCallback,params:{args:[{error:2,errorMessage:e.message}],bTime:Date.now()===o?o+.01:Date.now(),context:{apiName:"requirePlugin"}},ext:{origin:p.AppLog}}),e}}},set:function(t){e=t},enumerable:!0,configurable:!0}))}catch(e){_("sync task error",e)}var e,t;!function(e){if(d.AFAppX)return S=!0,void e();d.importScripts=function(e){m(e),!S&&/af-appx\.worker\.min\.js$/.test(e)&&(S=!0,O.forEach((function(e){return e()})),O=[])},O.push(e)}((function(){try{!function e(){setTimeout((function(){try{Ae().initGlobalListener()}catch(t){return e()}Ae().init()}),1e3)}()}catch(e){_("async task error",e)}}))}()}catch(e){_("init error",e)}}}();
 /**! __BUGME_END__ */
if(!self.__appxInited) {
self.__appxInited = 1;
require('@alipay/appx-compiler/lib/sjsEnvInit');

require('./config$');
require('./importScripts$');

var AFAppX = self.AFAppX;
self.getCurrentPages = AFAppX.getCurrentPages;
self.getApp = AFAppX.getApp;
self.Page = AFAppX.Page;
self.App = AFAppX.App;
self.my = AFAppX.bridge || AFAppX.abridge;
self.abridge = self.my;
self.Component = AFAppX.WorkerComponent || function(){};
self.$global = AFAppX.$global;
self.requirePlugin = AFAppX.requirePlugin;


if(AFAppX.registerApp) {
  AFAppX.registerApp({
    appJSON: appXAppJson,
  });
}

if(AFAppX.compilerConfig){ AFAppX.compilerConfig.component2 = true; }

function success() {
require('../../client/app');
require('../../client/pages/index/index?hash=335ab38a12d9f02c3aba2e2fdd4e8b64adb2522c');
}
self.bootstrapApp ? self.bootstrapApp({ success }) : success();
}